Описание
=====================

Данная библиотека немного облегчает задачу по парсингу простых текстов.

Чаще всего для парсинга нам требуется достаточно немного функций, для получения
отдельных элементов со страницы.

Данная бибилиотека используется только для html, поскольку все функции написаны
именно для этого формата данных.

Я ее сильно переделал от изначального варианта. Переделал методы и оставил только один файл
с одним классом.

Зависисмости
---------------------

Бибилиотека использует php-curl, php-domDocument, XPath

### Описание работы

Для начала работы необходимо вызвать экземпляр основного класса 

Grabber('http://site.com') и передать в качестве параметра строку с url.
Не забудьте подключить пространство имен.

##### Пример:

```php
use classes\grabber\Grabber;
$geturl = new Grabber('http://site.com');
```

Данный кусочек вернет вам объект вызванного экземпляра класса.

После этого можно инициировать создание объекта класса Dom,
или же просто получить html-содержимое

##### Пример:

```php
use classes\grabber\Grabber;
$parse = new Grabber('http://www.php.su/');

$parse->initDom(); //Инициирует создание dom объекта из HTML

$dom = $parse->getDom(); //Вернет объект класса DOM, для дальнейшей работы

```

Можно не инициировать создание объекта Dom-класса, а простополучить содержимое
в HTML

##### Пример:

```php
use classes\grabber\Grabber;
$parse = new Grabber('http://www.php.su/');

$html = $parse->getHTML(); //Вернет html-содержимое
```

Данный пример просто вернет HTML-страницы, которую вы указали при
создании экземпляра класса. Что с ним делать? Решать вам!

Можно использовать свои библиотеки или иначе распорядиться содержимым.


Если же вы инициировали создание объекта Dom, можно сделать посиковый запрос.

```php
use classes\grabber\Grabber;

$parse = new Grabber('http://www.php.su/');

/*
*Данный запрос инициирует создание объекта Xpath,
*с которого потом можно получить содержимое
*/
$xpath = $parse->initDom()->PathQuery('p', 'class', 'phpsulogo'); 
```

#### Метод PathQuery

PathQuery($tag, $selector, $value)

Данный метод совершает запрос по определенному пути в DOM. 
В качестве $tag необходимо передать html-тег (например: p);
$selector - это обозначение атрибута тега (например: class);
$value - значение селектора, (например: phpsulogo).

Теперь вам доступны следующие методы дальнейшей работы с ним:

1. **getValueOne()** - возвращает первое совпадение выборки
2. **getValueArray()** - возвращает массив выборки
3. **getHTMLOne()** - возвращает HTML первого совпадения выборки
4. **getHTMLArray()** - возвращает массив, содержащий html выборки


#### Пример простого получения данных из блока на сайте:

```php
<?php
spl_autoload_register(function ($class) {
    //require_once './' . $class . '.php';
    $class = str_replace('\\', '/', $class) . '.php';
    require_once($class);
    
});

use classes\grabber\Grabber;

$parse = new Grabber('http://www.php.su/');

echo $parse->initDom()
        ->PathQuery('p', 'class', 'phpsulogo')
        ->getValueOne();
```
Данный пример выведет:

```shell
user@web-server:~/html/grabber$ php index.php
PHP.SU
user@web-server:~/html/grabber$
```

Такой же пример вы увидите в файле index.php + вспомогательные функции.

В ближайшее время планируется подключение логера для парсера, класс уже есть,
нужно только динамично подключить с возможностью настройки.
