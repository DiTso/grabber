Описание
=====================

Данная библиотека немного облегчает задачу по парсингу простых текстов.

Чаще всего для парсинга нам требуется достаточно немного функций, для получения
отдельных элементов со страницы.

Данная бибилиотека используется только для html, поскольку все функции написаны
именно для этого формата данных.

Зависисмости
---------------------

Бибилиотека использует php-curl, php-domDocument, XPath

### Описание работы

Для начала работы необходимо вызвать экземпляр основного класса 

GetUrl('http://site.com') и передать в качестве параметра строку с url.
Не забудьте подключить пространство имен.

##### Пример:

```php
use classes\grabber\GetUrl;
$geturl = new GetUrl('http://site.com');
```

Данный кусочек вернет вам объект вызванного экземпляра класса.
Далее вы можете выбрать что вам нужно:

1. Из данного объекта получить объект класса getDOM  или
2. Получить HTML - код страницы.

Итак, для первого, мы будем использовать метод getObject()

##### Пример:

```php
use classes\grabber\GetUrl;
$geturl = new GetUrl('http://site.com');

$dom = $geturl->getObject();
```

Данный метод вернет объект другого класса, который вы можете использовать.
Описание дальнейшей работы ниже

Для второго случая мы будем использовать следующий пример.

##### Пример:

```php
use classes\grabber\GetUrl;
$geturl = new GetUrl('http://site.com');

$dom = $geturl->getHTML();
```

Данный пример просто вернет HTML-страницы, которую вы указали при
создании экземпляра класса. Что с ним делать? Решать вам!

Можно использовать свои библиотеки или встроенные, но так же можно воспользоваться
вторым моим классом GetDOM, который позовляет работать с объектом, который
мы получили в первом случае.

Итак, у нас есть объект полученный так:

```php
use classes\grabber\GetUrl;
$geturl = new GetUrl('http://site.com');

$dom = $geturl->getObject();
```

Теперь вам доступны следующие методы дальнейшей работы с ним:

1. getDOM() - возвращает объект типа domDocument
2. getPath($tag, $selector, $name) - возвращает объект XPath  с выборкой
3. getValueOne($tag, $selector, $name) - возвращает первое совпадение выборки
4. getValueArray($tag, $selector, $name) - возвращает массив выборки
5. getHTMLOne($tag, $selector, $name) - возвращает HTML первого совпадения выборки
6. getHTMLArray($tag, $selector, $name) - возвращает массив, содержащий html выборки

Список сложноватый для восприятия, поэтому к примерам:

С первым методом все понятно, вы можете дальше его использовать как объект DOM,
поэтому сразу перейдем к остальным.

Как, вы наверняка уже заметили, у этих методов одинаковый набор аргументов,
поэтому начнем с аргументов выборки:

1. $tag - подразумевает, что вы передадите html тег, например: 'ul'
2. $selector - то, по какому атрибуту тега будет идти поиск, чаще всего 'class'
3. $name - Значение атрибута, например: 'phpsulogo'

#### Пример:

```php
<?php
spl_autoload_register(function ($class) {
    //require_once './' . $class . '.php';
    $class = str_replace('\\', '/', $class) . '.php';
    require_once($class);
    
});

use classes\grabber\GetUrl;

$parse = new GetUrl('http://www.php.su/');

echo filterspaces($parse->getObject()->getValueOne('p', 'class', 'phpsulogo')) . PHP_EOL;

function filterspaces($data){
    
    $data = preg_replace('#\s#', '', $data);
    $data = preg_replace('#(.*)([a-zA-Z\.0-9]*)#U', '$2', $data);
    
    return $data;
    
}
```

Этот же пример вы увидите в index.php. Главное - это прростота использования.

Вы подключаете регистратор классов, затем вызываете экземпляр класса GetUrl,
и получаете данные просто:

```php
$parse = new GetUrl('http://www.php.su/');
echo $parse->getObject()->getValueOne('p', 'class', 'phpsulogo');
```
Данный пример выведет:

```shell
user@web-server:~/html/grabber$ php index.php
PHP.SU
```

